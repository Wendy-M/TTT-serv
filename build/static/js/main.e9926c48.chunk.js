(this["webpackJsonptipourboire-serveur"]=this["webpackJsonptipourboire-serveur"]||[]).push([[0],{65:function(e,t,a){e.exports=a(97)},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),l=(a(70),a(8)),c=a(9),i=a(11),m=a(10),u=(a(71),a(72),a(17)),p=a(53),h=a(6),d=a(20),f=a(13),E=a(25),g=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).abonnement=function(){var e=n.state.profil.stripeId;console.log(e),null===e&&alert("vous devez vous abonner pour b\xe9n\xe9ficier de l'app")},n.renderMesHistory=function(){if(Array.isArray(n.state.profil.history))return n.state.profil.history.length>0?n.state.profil.history.map((function(e,t){return r.a.createElement("div",{className:"historique",key:t},r.a.createElement("p",{className:"pourboire"},"vous avez re\xe7u ",e.amount,"\u20ac le ",e.date,"."))})):r.a.createElement("p",{className:"pourboire"},"Vous n'avez re\xe7u aucun pourboire pour l'instant.")},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),console.log(n.state.profil)}),(function(e){console.log(e)}))},n.deleteProfil=function(e){window.confirm("Etes-vous sur de vouloir supprimer votre compte? Cette action est irr\xe9versible."),e.preventDefault();var t={userId:localStorage.getItem("userID"),profil:n.state.profil},a=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),r={method:"DELETE",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/delete",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),alert("La suppression de votre compte a bien \xe9t\xe9 prise en compte. Merci."),n.props.history.push("/connexion")}),(function(e){console.log(e)}))},n.deleteAffiliation=function(e){var t=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),a={method:"DELETE",body:JSON.stringify({}),headers:t};fetch("https://back-end.osc-fr1.scalingo.io/serveur/deleteWaiter",a).then((function(e){return e.json()})).then((function(e){n.getWaiterList()}),(function(e){console.log(e)}))},n.infoStripe=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/customerAccount",{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){window.open(e,"_blank")}))},n.getRestaurantList=function(){var e=new Headers({Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/restaurantList",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({restaurant:e}),console.log(n.state.restaurant)}),(function(e){console.log(e)}))},n.renderCompteReferent=function(){if(n.state.profil.mangoWalletReferent)return r.a.createElement(E.a,{className:"lienCommentaire",href:"/referent"},"Compte R\xe9f\xe9rent")},n.renderMesRestau=function(){return n.state.restaurant.length?n.state.restaurant.map((function(e){return r.a.createElement("div",{className:"articles"},r.a.createElement("h4",{className:"titre"},e.restaurantName))})):r.a.createElement("h4",{className:"Nocoms"},"Vous n'\xeates pas encore affili\xe9 \xe0 un restaurant")},n.state={profil:{restaurant:{}},wallet:1,history:[],stripeUrl:"",restaurant:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMonProfil(),this.getRestaurantList()}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"contain"},r.a.createElement(f.a,{className:"mescartes"},r.a.createElement(h.a,{className:"mesdetails",sm:12,md:12},r.a.createElement(h.a,{s:6,md:12,className:"colPhoto"},r.a.createElement(p.a,{className:"photoProfil",src:"https://back-end.osc-fr1.scalingo.io"+this.state.profil.picture,roundedCircle:!0})),r.a.createElement("div",{className:"infoProfil"},r.a.createElement("h1",null,this.state.profil.firstname," ",this.state.profil.lastname),r.a.createElement("h3",{className:"titreNice"},this.state.profil.staff),r.a.createElement("p",{className:"profilPara"},this.state.profil.adress),r.a.createElement("p",{className:"profilPara"},this.state.profil.city),r.a.createElement("p",{className:"profilPara"},this.state.profil.email," "),r.a.createElement("p",{className:"profilParafin"},this.state.profil.phone))),r.a.createElement(h.a,{className:"monrestaurant",sm:12,md:12},r.a.createElement("h1",{className:"ligne"},"Mes restaurants "),this.renderMesRestau())),r.a.createElement(f.a,{className:"rowButton"},r.a.createElement(h.a,{classeName:"colModifier",md:6},r.a.createElement(u.b,{to:"/modifierMonProfil",className:"modif"},r.a.createElement("button",{className:"buttonModifier"},"Modifier"))),r.a.createElement(h.a,{md:6},r.a.createElement("button",{className:"buttonAbo",onClick:this.infoStripe},"Mon porte-monnaie"))),r.a.createElement(f.a,null,r.a.createElement(h.a,{xs:12,s:12,md:6},r.a.createElement(E.a,{className:"lienCommentaire",href:"/mesTips"},"Mes commentaires")),r.a.createElement(h.a,{xs:12,s:12,md:6},r.a.createElement(E.a,{className:"lienCommentaire",href:"/mesHistoriques"},"Mes historiques")),r.a.createElement(h.a,{xs:12,s:12,md:6},r.a.createElement(E.a,{className:"lienCommentaire",href:"/cagnotte"},"Ma Cagnotte Collective")),r.a.createElement(h.a,{xs:12,s:12,md:6},this.renderCompteReferent()),r.a.createElement(h.a,{xs:12,s:12,md:6},r.a.createElement(E.a,{className:"lienCommentaire",href:"/monAbonnement"},"Devenir Premium !!!!!!!!!!!!!!!!!!!!!!!!!!!!!"))))}}]),a}(n.Component),v=a(23),b=a(5),y=a(55),C=a(33),N=(a(78),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.addLogin=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/login",r).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("token",e.token),localStorage.setItem("userID",e.userId),n.props.history.push("/monprofil")}))},n.state={email:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"connexCont"},r.a.createElement(f.a,{className:"background"},r.a.createElement(h.a,{className:"blockConnexion",sm:12,md:7},r.a.createElement("h1",{className:"titreConnexion"},"D\xe9j\xe0 membre?"),r.a.createElement("h1",{className:"titreConnexion"},"Connectez-vous!"),r.a.createElement(b.a,{className:"identifiants"},r.a.createElement(b.a.Row,{className:"align-items-center"},r.a.createElement(h.a,{xs:12,s:12},r.a.createElement(b.a.Label,{htmlFor:"inlineFormInputGroup",srOnly:!0},"Username"),r.a.createElement(y.a,{className:"mb-2"},r.a.createElement(C.a,{name:"email",id:"inlineFormInputGroup",placeholder:"Email",onChange:this.handleInput,value:this.state.email}))),r.a.createElement(h.a,{s:12,className:"colPassword"},r.a.createElement(b.a.Label,{htmlFor:"inlineFormInput",srOnly:!0},"Mot de passe"),r.a.createElement(b.a.Control,{name:"password",className:" connexPass",id:"inlineFormInput",placeholder:"Password",type:"password",onChange:this.handleInput,value:this.state.password})),r.a.createElement(h.a,{sm:12},r.a.createElement(u.b,{to:"/passwordReset"},r.a.createElement("p",{className:"mdpOublie"},"Mot de passe oubli\xe9 ?"))),r.a.createElement(h.a,{md:4},r.a.createElement(u.b,{to:"/monProfil"},r.a.createElement(E.a,{type:"submit",className:"connectServeur",onClick:this.addLogin},"Se connecter"))),r.a.createElement(h.a,{className:"colMembre",xs:12},r.a.createElement("p",{className:"membre"},"Pas encore membre ?",r.a.createElement(u.b,{className:"compte",to:"/inscription"},""," Cr\xe9er mon compte")))))),r.a.createElement(h.a,{className:"imageDeskServeur",md:5})))}}]),a}(n.Component)),j=(a(80),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.addNewRegister=function(e){e.preventDefault();var t={firstname:n.state.firstname,lastname:n.state.lastname,city:n.state.city,adress:n.state.adress,staff:n.state.staff,date:n.state.date,email:n.state.email,phone:n.state.phone,password:n.state.password},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/register",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))},n.state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"inscr"},r.a.createElement(f.a,{className:"RowInscr"},r.a.createElement(h.a,{md:8,className:"Titre",sm:12},r.a.createElement("h1",{className:"titreh1"},"Cr\xe9er mon compte "),r.a.createElement("p",{className:"Titrep"},"Merci de remplir les informations ci-dessous pour finaliser la cr\xe9ation de votre compte."),r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{controlId:"lastname"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Nom",name:"lastname",onChange:this.handleInput,value:this.state.lastname,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"firstname"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Pr\xe9nom",name:"firstname",onChange:this.handleInput,value:this.state.firstname,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"date"},r.a.createElement(b.a.Control,{type:"date",placeholder:"Date de naissance",name:"date",onChange:this.handleInput,value:this.state.date,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"adress"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Adresse",name:"adress",onChange:this.handleInput,value:this.state.adress,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"city"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.handleInput,value:this.state.city,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"phone"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Telephone(Facultatif)",name:"phone",onChange:this.handleInput,value:this.state.phone,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"staff"},r.a.createElement(b.a.Control,{as:"select",type:"text",name:"staff",onChange:this.handleInput,value:this.state.staff,className:"tailleInscr"},r.a.createElement("option",null,"-"),r.a.createElement("option",null,"Commis"),r.a.createElement("option",null,"Chef de rang"),r.a.createElement("option",null,"Ma\xeetre d'h\xf4tel"),r.a.createElement("option",null,"Barman"),r.a.createElement("option",null,"Cuisinier"),r.a.createElement("option",null,"Accueil"))),r.a.createElement(b.a.Group,{controlId:"email"},r.a.createElement(b.a.Control,{type:"mail",placeholder:"Email ",name:"email",onChange:this.handleInput,value:this.state.email,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"password"},r.a.createElement(b.a.Control,{type:"password",placeholder:"Password",name:"password",onChange:this.handleInput,value:this.state.password,className:"tailleInscr"})),r.a.createElement(b.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(b.a.Check,{type:"checkbox",label:"Acceptez les Conditions g\xe9n\xe9rales d'utilisation"})),r.a.createElement(E.a,{className:"connectServeur",variant:"primary",block:!0,type:"submit",onClick:this.addNewRegister},"S'inscrire"),r.a.createElement("p",null,this.state.message))),r.a.createElement(h.a,{className:"imageInscrServeur",md:4})))}}]),a}(n.Component)),I=(a(81),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getMesCommentaires=function(){console.log("coucou");var e=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/mesCommentaires",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({mesComs:t}),console.log(n.state.mesComs)}),(function(e){console.log(e)}))},n.renderMesCommentaires=function(){return n.state.mesComs.commentaires.length?n.state.mesComs.commentaires.map((function(e,t){return r.a.createElement("div",{className:"divCom",key:t},r.a.createElement("div",{className:"nomPrenom"},r.a.createElement("h2",{className:"prenomCom"},e.prenom)," ",r.a.createElement("h2",{className:"nomCom"},e.nom," ")),r.a.createElement("div",null,r.a.createElement("p",{className:"statut2"},e.texte)))})):r.a.createElement("h4",{className:"Nocoms"},"Vous n'avez pas encore de commentaires")},n.state={mesComs:{commentaires:[]}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMesCommentaires()}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"mesComs"},r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("h1",{className:"titreComs"},"Mes commentaires"))),r.a.createElement(f.a,{className:"commentaireBackground"},r.a.createElement(h.a,null,this.renderMesCommentaires())))}}]),a}(n.Component)),S=(a(82),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).change=function(e){var t=n.state.serveur;t[e.target.name]=e.target.value,n.setState({serveur:t})},n.postDataServeur=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),t={userId:localStorage.getItem("userId")},a={method:"POST",body:JSON.stringify(t),headers:e};fetch("https://back-end.osc-fr1.scalingo.io/serveur/dataProfil",a).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({serveur:t,object:t}),console.log(n.state)}),(function(e){console.log(e)}))},n.editserveur=function(e){e.preventDefault();var t={userId:localStorage.getItem("userID"),serveur:n.state.serveur},a=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),r={method:"PUT",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/edit",r).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))},n.modifProfilLogo=function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({"X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/editlogo",{method:"PUT",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message}),n.postDataServeur()}),(function(e){console.log(e)}))},n.state={serveur:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.postDataServeur()}},{key:"render",value:function(){return r.a.createElement("div",{className:"bloc-modifierProfil"},r.a.createElement(f.a,null,r.a.createElement(h.a,{md:{span:12,offset:3},className:"titreModif"},r.a.createElement("p",null,"Modification du profil"),r.a.createElement(b.a,null,r.a.createElement(b.a.Group,{controlId:"formGroupName"},r.a.createElement(b.a.Control,{name:"lastname",type:"text",placeholder:"Nom",onChange:this.change,value:this.state.serveur.lastname})),r.a.createElement(b.a.Group,{controlId:"formGroupPrenom"},r.a.createElement(b.a.Control,{name:"firstname",type:"text",placeholder:"Pr\xe9nom",onChange:this.change,value:this.state.serveur.firstname})),r.a.createElement(b.a.Group,{controlId:"formAdresse"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Adresse",name:"adress",onChange:this.change,value:this.state.serveur.adress})),r.a.createElement(b.a.Group,{controlId:"formVille"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.change,value:this.state.serveur.city})),r.a.createElement(b.a.Group,{controlId:"formTel"},r.a.createElement(b.a.Control,{type:"text",placeholder:"Telephone(Facultatif)",name:"phone",onChange:this.change,value:this.state.serveur.phone})),r.a.createElement(b.a.Group,{controlId:"formPoste"},r.a.createElement(b.a.Control,{as:"select",type:"text",name:"staff",onChange:this.change,value:this.state.serveur.staff},r.a.createElement("option",null,"-"),r.a.createElement("option",null,"Commis"),r.a.createElement("option",null,"Chef de rang"),r.a.createElement("option",null,"Ma\xeetre d'h\xf4tel"),r.a.createElement("option",null,"Barman"),r.a.createElement("option",null,"Cuisinier"),r.a.createElement("option",null,"Accueil")))),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.modifProfilLogo,className:"formLogo"},r.a.createElement("img",{className:"serveurPicture",src:"https://back-end.osc-fr1.scalingo.io/"+this.state.serveur.picture}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"chargePic",type:"file",name:"file"}),r.a.createElement("button",{className:"button",type:"submit"},"T\xe9l\xe9charger"))),r.a.createElement(E.a,{className:"submitButton",variant:"primary",type:"submit",onClick:this.editserveur},"Mettre \xe0 jour mon profil"))))}}]),a}(n.Component)),w=(a(83),a(29)),k=a(56),O=a(50),M=a.n(O),P=a(57),R=(a(85),{style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),x=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("label",null,"Card details",r.a.createElement(w.CardElement,{options:R})))}}]),a}(n.Component);function T(){var e=Object(w.useStripe)(),t=Object(w.useElements)(),a=function(){var a=Object(P.a)(M.a.mark((function a(n){var r,o,s,l,c,i;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=function(e){var t=e.customerId,a=e.paymentMethodId,n=e.priceId;return fetch("https://back-end.osc-fr1.scalingo.io/serveur/createsubscription",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify({customerId:t,paymentMethodId:a,priceId:"price_1Hr1j9Hoh2Vgz5QdvrI9FBDN"})}).then((function(e){return e.json()})).then((function(e){if(e.error)throw e;return e})).then((function(e){return{paymentMethodId:a,priceId:n,subscription:e}}))},n.preventDefault(),e&&t){a.next=4;break}return a.abrupt("return");case 4:return r=t.getElement(w.CardElement),a.next=7,e.createPaymentMethod({type:"card",card:r});case 7:o=a.sent,s=o.error,l=o.paymentMethod,s?console.log("[createPaymentMethod error]",s):(console.log("[PaymentMethod]",l),c=l.id,"","",i({customerId:"",paymentMethodId:c,priceId:""}));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("form",{className:"coForm",onSubmit:a},r.a.createElement(x,null),r.a.createElement("button",{disabled:!e},"Devenir un Serveur Premium"))}var H=Object(k.a)("pk_test_51HAxRlHoh2Vgz5QdMpHXhINQMDhyGPR4gFvzs9vVzocySBI4WCfw8oPa7De6PC2ZJZlQKVQFRDPLU7FIGmXZC0QA00XGutN1eU"),A=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"monAbonnement"},r.a.createElement(f.a,{className:"infoAbonnement"},r.a.createElement(h.a,null,r.a.createElement("h3",null,"Votre abonnement premium serveur TIPOURBOIRE"),r.a.createElement(w.Elements,{className:"cbInput",stripe:H},r.a.createElement(T,null)))))}}]),a}(n.Component),z=(a(86),a(103)),D=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{fluid:!0},r.a.createElement(f.a,{className:"partie1"},r.a.createElement(z.a,{className:"nav justify-content-right"},r.a.createElement(z.a.Toggle,{alignRight:!0,variant:"success",id:"dropdown-basic"},r.a.createElement("img",{src:"/images/user.png"})),r.a.createElement(z.a.Menu,null,r.a.createElement(z.a.Item,{href:"/MonProfil"},"Mon profil"),r.a.createElement(z.a.Item,{href:"/mesTips"},"Mes commentaires"),r.a.createElement(z.a.Item,{href:"/mesHistoriques"},"Mes historiques"),r.a.createElement(z.a.Item,{href:"/Connexion"},"Connexion"),r.a.createElement(u.b,{to:"/connexion",onClick:function(){return localStorage.clear()}},r.a.createElement(z.a.Item,{href:"/Connexion"},"Deconnexion")))),r.a.createElement(h.a,{className:"logoPartie1",md:12},r.a.createElement("img",{src:"/images/logoJaune.png"}))))}}]),a}(n.Component),L=(a(88),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.passwordRenew=function(e){if(e.preventDefault(),n.state.email&&n.state.password){var t={email:n.state.email,password:n.state.password,token:n.props.match.params.token},a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/password-renew",a).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))}},n.state={email:"",password:"",message:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"renewPass"},r.a.createElement(f.a,null,r.a.createElement(h.a,{className:"PassRenewCol",md:12},r.a.createElement("h1",{className:"newPass"}," Votre nouveau mot de passe"),r.a.createElement("form",{className:"formRenew",onSubmit:this.passwordRenew},r.a.createElement("input",{className:"inputRenew",type:"email",id:"email",name:"email",onChange:this.handleInput,placeholder:"Email"}),r.a.createElement("br",null),r.a.createElement("input",{className:"inputRenew",type:"password",id:"password",name:"password",onChange:this.handleInput,placeholder:"Nouveau mot de passe"}),r.a.createElement("br",null),r.a.createElement(E.a,{className:"renewButton"},"Valider")),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component)),G=(a(89),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.passwordReset=function(e){if(e.preventDefault(),n.state.email){var t={email:n.state.email},a={method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(t)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/password-reset",a).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}),(function(e){console.log(e)}))}},n.state={email:"",message:""},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{className:"passwordReset"},r.a.createElement(f.a,null,r.a.createElement(h.a,{className:"PassResetCol",md:12},r.a.createElement("div",{className:"PassResetDiv"},r.a.createElement("h1",{className:"taille"},"Veuillez saisir votre mail "),r.a.createElement("h1",{className:"titrePass taille"},"pour r\xe9initialiser votre mot de passe "),r.a.createElement("form",{className:"formReset",onSubmit:this.passwordReset},r.a.createElement("input",{className:"inputReset",type:"email",id:"email",name:"email",onChange:this.handleInput,placeholder:"Email"})))),r.a.createElement(h.a,{className:"ButtonReset",md:12},r.a.createElement(E.a,{className:"resetButton"},"Confirmer"),r.a.createElement("p",null,this.state.message))))}}]),a}(n.Component)),q=(a(90),a(104)),B=a(105),W=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).deleteProfil=function(t){window.confirm("Etes-vous sur de vouloir supprimer votre compte? Cette action est irr\xe9versible."),t.preventDefault();var a={userId:localStorage.getItem("userID"),profil:e.state.profil},n=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),r={method:"DELETE",body:JSON.stringify(a),headers:n};fetch("https://back-end.osc-fr1.scalingo.io/serveur/delete",r).then((function(e){return e.json()})).then((function(t){e.setState({message:t.message}),alert("La suppression de votre compte a bien \xe9t\xe9 prise en compte. Merci."),e.props.history.push("/connexion")}),(function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer"},r.a.createElement(q.a,{fixed:"bottom",collapseOnSelect:!0,expand:"lg",bg:"#edeaea"},r.a.createElement(q.a.Brand,{href:"#home",className:"textFooter"},"@Tipourboire"),r.a.createElement(q.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(q.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(B.a,{className:"mr-auto"},r.a.createElement(B.a.Link,{href:"https://tipourboire.com",className:"textFooter"},"Condition G\xe9n\xe9ral"),r.a.createElement(B.a.Link,{href:"https://tipourboire.com",className:"textFooter"},"Contact"),r.a.createElement(B.a.Link,{href:"#pricing",className:"textFooter",onClick:this.deleteProfil},"Supprimer mon compte")),r.a.createElement(B.a,null,r.a.createElement(B.a.Link,{eventKey:2,href:"https://tipourboire.com",className:"textFooter"},"A propos")))))}}]),a}(n.Component),X=(a(91),a(12)),F=(a(92),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).renderMesHistory=function(){if(Array.isArray(n.state.profil.history))return n.state.profil.history.length>0?n.state.profil.history.map((function(e,t){return r.a.createElement("div",{className:"historique",key:t},r.a.createElement("p",{className:"pourboire"},"vous avez re\xe7u ",e.amount,"\u20ac le ",e.date,"."))})):r.a.createElement("p",{className:"pourboire"},"Vous n'avez re\xe7u aucun pourboire pour l'instant.")},n.getMonProfil=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/monProfil",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({profil:t}),console.log(n.state.profil)}),(function(e){console.log(e)}))},n.state={profil:{restaurantName:{}},wallet:1,history:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getMonProfil()}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"mesHisto"},r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement("h1",{className:"titreHisto"},"Mes Historiques de pourboires"))),r.a.createElement(f.a,{className:"commentaireHisto"},r.a.createElement(h.a,null,this.renderMesHistory())))}}]),a}(n.Component)),V=(a(93),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).addBankAccount=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region,zip:n.state.zip,iban:n.state.iban},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoBank",r).then((function(e){return e.json()})).then((function(e){console.log(e)}))},n.payoutMangoPay=function(e){e.preventDefault();var t={adress:n.state.adress,password:n.state.password,city:n.state.city,region:n.state.region,zip:n.state.zip,iban:n.state.iban},a=new Headers({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:"Bearer "+localStorage.getItem("token")}),r={method:"POST",body:JSON.stringify(t),headers:a};fetch("https://back-end.osc-fr1.scalingo.io/serveur/payoutMango",r).then((function(e){return e.json()})).then((function(e){console.log(e)}))},n.change=function(e){var t=n.state.document;t[e.target.name]=e.target.value,n.setState({document:t})},n.handleInput=function(e){n.setState(Object(v.a)({},e.target.name,e.target.value))},n.getWalletAmount=function(){var e=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/getWalet",{method:"get",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({amount:e})}))},n.onSubmit=function(e){e.preventDefault();var t=new FormData(e.target),a=new Headers({Authorization:"bearer "+localStorage.getItem("token")});fetch("https://back-end.osc-fr1.scalingo.io/serveur/mangoKYC",{method:"POST",body:t,headers:a}).then((function(e){return e.json()})).then((function(e){n.setState({message:e.message})}))},n.state={document:{}},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getWalletAmount()}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"cagnotteCont"},r.a.createElement(f.a,{className:"rowCagn"},r.a.createElement(h.a,null,r.a.createElement("h1",null,"Montant de votre cagnotte :"),r.a.createElement("h2",null,r.a.createElement("strong",null,this.state.amount/100," euros")),r.a.createElement(E.a,{onClick:this.payoutMangoPay},"Retirer votre argent"))),r.a.createElement(f.a,{className:"rowPasDeCagn"},r.a.createElement(h.a,null,r.a.createElement("h5",null," Pas encore de cagnotte ? Suivez les \xe9tapes ci-dessous !"))),r.a.createElement(f.a,{className:"rowId"},r.a.createElement(h.a,null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("h3",null,"Confirmation d'identit\xe9 "),r.a.createElement("h5",null,"(Recto Verso sur la m\xeame page)"),r.a.createElement("input",{className:"chargePic",type:"file",name:"file"}),r.a.createElement(E.a,{type:"submit"},"T\xe9l\xe9charger")))),r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(b.a,null,r.a.createElement(b.a.Control,{type:"text",placeholder:"Votre Adresse",name:"adress",onChange:this.handleInput,value:this.state.adress}),r.a.createElement(b.a.Control,{type:"text",placeholder:"Code Postal",name:"zip",onChange:this.handleInput,value:this.state.zip}),r.a.createElement(b.a.Control,{type:"text",placeholder:"Ville",name:"city",onChange:this.handleInput,value:this.state.city}),r.a.createElement(b.a.Control,{type:"text",placeholder:"Votre R\xe9gion",name:"region",onChange:this.handleInput,value:this.state.region}),r.a.createElement(b.a.Control,{type:"text",placeholder:"Votre IBAN",name:"iban",onChange:this.handleInput,value:this.state.iban})),r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:this.addBankAccount},"Envoyez les informations banquaires"))))}}]),a}(n.Component)),J=(a(94),a(95),a(96),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).change=function(e){var t=n.state.referent;t[e.target.name]=e.target.value,n.setState({referent:t})},n.getReferentWallet=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/referentWallet",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){var t=e;n.setState({amount:t})}),(function(e){console.log(e)}))},n.getWaiterList=function(){var e=new Headers({Authorization:"Bearer "+localStorage.getItem("token"),"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"});fetch("https://back-end.osc-fr1.scalingo.io/serveur/waiterList",{method:"GET",headers:e}).then((function(e){return e.json()})).then((function(e){n.setState({waiter:e})}),(function(e){console.log(e)}))},n.renderMesServeurs=function(){return n.state.waiter.tabServeur.map((function(e){return r.a.createElement(h.a,{className:"nameServ",xs:12,s:12,md:6},r.a.createElement("h3",null,r.a.createElement("strong",null,e.serveurName)),r.a.createElement("br",null),r.a.createElement(b.a,null,r.a.createElement(b.a.Control,{type:"number",placeholder:"Montant du transfert",name:"amount",onChange:n.change})),r.a.createElement(E.a,{className:"CollectButton",type:"submit",onClick:function(){var t=new Headers({"Content-Type":"application/json",Authorization:"bearer "+localStorage.getItem("token")}),a={email:e.serveurMail,amount:n.state.referent.amount},r={method:"POST",headers:t,body:JSON.stringify(a)};fetch("https://back-end.osc-fr1.scalingo.io/serveur/referentTransfert",r).then((function(e){return e})).then((function(e){console.log(e)}),(function(e){console.log(e)}))}},"Envoyez"))}))},n.state={waiter:{tabServeur:[]},referent:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getReferentWallet(),this.getWaiterList()}},{key:"render",value:function(){return r.a.createElement(d.a,{className:"mesHisto"},r.a.createElement(f.a,{className:"commentaireHisto"},r.a.createElement(h.a,{xs:12,s:12,md:12},r.a.createElement("h1",null,"Montant de la cagnotte r\xe9f\xe9rent :"),r.a.createElement("h2",{className:"montantCo"},r.a.createElement("strong",null,this.state.amount/100," euros")),r.a.createElement("h1",null,"Liste des Serveurs:"))),r.a.createElement(f.a,{className:"rowServeurCo"},this.renderMesServeurs()))}}]),a}(n.Component)),U=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setLogin=function(e){n.setState({login:e})},n.state={login:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(u.a,null,r.a.createElement("div",{className:"main-container"},r.a.createElement(D,null),r.a.createElement(X.c,null,r.a.createElement(X.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(N,Object.assign({setLogin:e.setLogin},t))}}),r.a.createElement(X.a,{path:"/inscription",component:j}),r.a.createElement(X.a,{path:"/monProfil",component:g}),r.a.createElement(X.a,{path:"/modifierMonProfil",component:S}),r.a.createElement(X.a,{path:"/mesTips",component:I}),r.a.createElement(X.a,{path:"/mesHistoriques",component:F}),r.a.createElement(X.a,{path:"/monAbonnement",component:A}),r.a.createElement(X.a,{path:"/passwordReset",component:G}),r.a.createElement(X.a,{path:"/passwordRenew",component:L}),r.a.createElement(X.a,{path:"/cagnotte",component:V}),r.a.createElement(X.a,{path:"/referent",component:J})),r.a.createElement(W,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.e9926c48.chunk.js.map